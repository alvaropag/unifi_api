<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module unifi</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module unifi</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>UniFi controller API, tested with v2.4.6.

<p><b>Version:</b> 0.5</p>
<p><b>Authors:</b> Andrey Andruschenko (<a href="mailto:apofiget@gmail.com"><tt>apofiget@gmail.com</tt></a>).</p>
<p><b>References</b><ul><li><a href="http://www.ubnt.com/download/?group=unifi-ap">UniFi controller download</a>;</li><li><a href="http://wiki.ubnt.com/UniFi_FAQ">UniFi FAQ</a>;</li><li><a href="http://community.ubnt.com/t5/tkb/communitypage">UniFi community knowledge base</a></li></ul></p>

<h2><a name="description">Description</a></h2>UniFi controller API, tested with v2.4.6
<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-opt_list">opt_list()</a></h3>
<p><tt>opt_list() = [<a href="#type-option">option()</a>]</tt></p>


<h3 class="typedecl"><a name="type-option">option()</a></h3>
<p><tt>option() = {url, Url::string()} | {cookie, Cookie::string()} | {path, Path::string()}</tt></p>
<p>  Controller session options</p>

<h3 class="typedecl"><a name="type-token">token()</a></h3>
<p><tt>token() = list()</tt></p>
<p>  Voucher creation token</p>

<h3 class="typedecl"><a name="type-user_type">user_type()</a></h3>
<p><tt>user_type() = all | guest | user | noted | blocked</tt></p>
<p>  Type of controller client</p>

<h3 class="typedecl"><a name="type-version">version()</a></h3>
<p><tt>version() = v2 | v3</tt></p>
<p>  Controller API version</p>

<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#archive_alerts-1">archive_alerts/1</a></td><td>Archive active alerts.</td></tr>
<tr><td valign="top"><a href="#auth_guest-3">auth_guest/3</a></td><td>Authorize guest based on his MAC address.</td></tr>
<tr><td valign="top"><a href="#auth_guest-5">auth_guest/5</a></td><td>Authorize guest based on his MAC address.</td></tr>
<tr><td valign="top"><a href="#auth_guest-6">auth_guest/6</a></td><td>Authorize guest based on his MAC address.</td></tr>
<tr><td valign="top"><a href="#backup-1">backup/1</a></td><td>Return backup of controller configuration.</td></tr>
<tr><td valign="top"><a href="#block_client-2">block_client/2</a></td><td>Block wireless client with given MAC-address.</td></tr>
<tr><td valign="top"><a href="#del_voucher-2">del_voucher/2</a></td><td>Delete generated voucher.</td></tr>
<tr><td valign="top"><a href="#disconnect_client-2">disconnect_client/2</a></td><td>Disconnect wireless client with given MAC-address, forcing them to reassociate.</td></tr>
<tr><td valign="top"><a href="#gen_voucher-3">gen_voucher/3</a></td><td>Generate voucher(s).</td></tr>
<tr><td valign="top"><a href="#gen_voucher-5">gen_voucher/5</a></td><td>Generate voucher(s).</td></tr>
<tr><td valign="top"><a href="#gen_voucher-6">gen_voucher/6</a></td><td>Generate voucher(s).</td></tr>
<tr><td valign="top"><a href="#gen_voucher_ot-3">gen_voucher_ot/3</a></td><td>Generate one-time used voucher(s).</td></tr>
<tr><td valign="top"><a href="#gen_voucher_ot-5">gen_voucher_ot/5</a></td><td>Generate one-time used voucher(s).</td></tr>
<tr><td valign="top"><a href="#gen_voucher_ot-6">gen_voucher_ot/6</a></td><td>Generate one-time used voucher(s).</td></tr>
<tr><td valign="top"><a href="#get_alerts-1">get_alerts/1</a></td><td>Return list of all alerts.</td></tr>
<tr><td valign="top"><a href="#get_alerts_unarchived-1">get_alerts_unarchived/1</a></td><td>Return list of unarchived alers.</td></tr>
<tr><td valign="top"><a href="#get_alluser-3">get_alluser/3</a></td><td>Return a list of all known clients, with detailed information about each.</td></tr>
<tr><td valign="top"><a href="#get_alluser_offline-3">get_alluser_offline/3</a></td><td>Return a list of all known offline clients, with detailed information about each.</td></tr>
<tr><td valign="top"><a href="#get_aps-1">get_aps/1</a></td><td>Return list of AP's with options.</td></tr>
<tr><td valign="top"><a href="#get_events-1">get_events/1</a></td><td>Return list of all events.</td></tr>
<tr><td valign="top"><a href="#get_events-2">get_events/2</a></td><td>Return list of all events within N hours.</td></tr>
<tr><td valign="top"><a href="#get_settings-1">get_settings/1</a></td><td>Return a list of controller settings.</td></tr>
<tr><td valign="top"><a href="#get_user_groups-1">get_user_groups/1</a></td><td>Return a list of user groups with its settings.</td></tr>
<tr><td valign="top"><a href="#get_users-1">get_users/1</a></td><td>Return a list of all known clients, with significant information about each.</td></tr>
<tr><td valign="top"><a href="#get_users_active-1">get_users_active/1</a></td><td>Return a list of all active clients, with significant information about each.</td></tr>
<tr><td valign="top"><a href="#get_voucher-2">get_voucher/2</a></td><td>Return generated voucher(s).</td></tr>
<tr><td valign="top"><a href="#get_wlans-1">get_wlans/1</a></td><td>Return a list of wireless networks with settings.</td></tr>
<tr><td valign="top"><a href="#login-3">login/3</a></td><td>Open session.</td></tr>
<tr><td valign="top"><a href="#login-5">login/5</a></td><td>Open session.</td></tr>
<tr><td valign="top"><a href="#logout-1">logout/1</a></td><td>Close session.</td></tr>
<tr><td valign="top"><a href="#restart_ap-2">restart_ap/2</a></td><td>Restart AP with given MAC-address.</td></tr>
<tr><td valign="top"><a href="#unauth_guest-2">unauth_guest/2</a></td><td>Unauthorize guest based on his MAC address.</td></tr>
<tr><td valign="top"><a href="#unblock_client-2">unblock_client/2</a></td><td>Unblock wireless client with given MAC-address.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="archive_alerts-1">archive_alerts/1</a></h3>
<div class="spec">
<p><tt>archive_alerts(Opts::<a href="#type-opt_list">opt_list()</a>) -&gt; {ok, [none]} | {error, Reply::string()}</tt><br></p>
</div><p>Archive active alerts</p>

<h3 class="function"><a name="auth_guest-3">auth_guest/3</a></h3>
<div class="spec">
<p><tt>auth_guest(Opts::<a href="#type-opt_list">opt_list()</a>, Mac::string(), Minutes::integer()) -&gt; {ok, [null]} | {error, Reply::string()}</tt><br></p>
</div><p>Authorize guest based on his MAC address.<br>
    Mac     -- the guest MAC address: "aa:bb:cc:dd:ee:ff"<br>
    Minutes -- duration of the authorization in minutes<br></p>

<h3 class="function"><a name="auth_guest-5">auth_guest/5</a></h3>
<div class="spec">
<p><tt>auth_guest(Opts::<a href="#type-opt_list">opt_list()</a>, Mac::string(), Minutes::integer(), Up::integer(), Down::integer()) -&gt; {ok, [null]} | {error, Reply::string()}</tt><br></p>
</div><p>Authorize guest based on his MAC address.<br>
    Mac     -- the guest MAC address: "aa:bb:cc:dd:ee:ff"<br>
    Minutes -- duration of the authorization in minutes<br>
    Up      -- up speed allowed in kbps (optional)<br>
    Down    -- down speed allowed in kbps (optional)<br></p>

<h3 class="function"><a name="auth_guest-6">auth_guest/6</a></h3>
<div class="spec">
<p><tt>auth_guest(Opts::<a href="#type-opt_list">opt_list()</a>, Mac::string(), Minutes::integer(), Up::integer(), Down::integer(), Quota::integer()) -&gt; {ok, [null]} | {error, Reply::string()}</tt><br></p>
</div><p>Authorize guest based on his MAC address.<br>
    Mac     -- the guest MAC address: "aa:bb:cc:dd:ee:ff"<br>
    Minutes -- duration of the authorization in minutes<br>
    Up      -- up speed allowed in kbps<br>
    Down    -- down speed allowed in kbps<br>
    Quota   -- quantity of bytes allowed in MB<br></p>

<h3 class="function"><a name="backup-1">backup/1</a></h3>
<div class="spec">
<p><tt>backup(Opts::<a href="#type-opt_list">opt_list()</a>) -&gt; {ok, File::binary()} | {error, Reply::string()}</tt><br></p>
</div><p>Return backup of controller configuration</p>

<h3 class="function"><a name="block_client-2">block_client/2</a></h3>
<div class="spec">
<p><tt>block_client(Opts::<a href="#type-opt_list">opt_list()</a>, Mac::string()) -&gt; {ok, [null]} | {error, Reply::string()}</tt><br></p>
</div><p>Block wireless client with given MAC-address</p>

<h3 class="function"><a name="del_voucher-2">del_voucher/2</a></h3>
<div class="spec">
<p><tt>del_voucher(Opts::<a href="#type-opt_list">opt_list()</a>, Id::string()) -&gt; {ok, [none]} | {error, Reply::string()}</tt><br></p>
</div><p>Delete generated voucher</p>

<h3 class="function"><a name="disconnect_client-2">disconnect_client/2</a></h3>
<div class="spec">
<p><tt>disconnect_client(Opts::<a href="#type-opt_list">opt_list()</a>, Mac::string()) -&gt; {ok, [null]} | {error, Reply::string()}</tt><br></p>
</div><p>Disconnect wireless client with given MAC-address, forcing them to reassociate.</p>

<h3 class="function"><a name="gen_voucher-3">gen_voucher/3</a></h3>
<div class="spec">
<p><tt>gen_voucher(Opts::<a href="#type-opt_list">opt_list()</a>, Expires::integer(), Count::integer()) -&gt; {ok, <a href="#type-token">token()</a>} | {error, Reply::string()}</tt><br></p>
</div><p>Generate voucher(s)<br>
  Expires -- Minutes to voucher expires<br>
  Count   -- count vouchers to generate<br>
  Return token: create_time<br></p>

<h3 class="function"><a name="gen_voucher-5">gen_voucher/5</a></h3>
<div class="spec">
<p><tt>gen_voucher(Opts::<a href="#type-opt_list">opt_list()</a>, Expires::integer(), Count::integer(), Up::integer(), Down::integer()) -&gt; {ok, <a href="#type-token">token()</a>} | {error, Reply::string()}</tt><br></p>
</div><p>Generate voucher(s)<br>
  Expires -- Minutes to voucher expires<br>
  Count   -- count vouchers to generate<br>
  Up      -- upload bandwith, kbps<br>
  Down    -- download bandwith, kbps<br>
  Return token: create_time<br></p>

<h3 class="function"><a name="gen_voucher-6">gen_voucher/6</a></h3>
<div class="spec">
<p><tt>gen_voucher(Opts::<a href="#type-opt_list">opt_list()</a>, Expires::integer(), Count::integer(), Up::integer(), Down::integer(), Quota::integer()) -&gt; {ok, <a href="#type-token">token()</a>} | {error, Reply::string()}</tt><br></p>
</div><p>Generate voucher(s)<br>
  Expires -- Minutes to voucher expires<br>
  Count   -- count vouchers to generate<br>
  Up      -- upload bandwith, kbps<br>
  Down    -- download bandwith, kbps<br>
  Quota   -- download quota, MB<br>
  Return token: create_time<br></p>

<h3 class="function"><a name="gen_voucher_ot-3">gen_voucher_ot/3</a></h3>
<div class="spec">
<p><tt>gen_voucher_ot(Opts::<a href="#type-opt_list">opt_list()</a>, Expires::integer(), Count::integer()) -&gt; {ok, <a href="#type-token">token()</a>} | {error, Reply::string()}</tt><br></p>
</div><p>Generate one-time used voucher(s)<br>
  Expires -- Minutes to voucher expires<br>
  Count   -- count vouchers to generate<br>
  Return token: create_time<br></p>

<h3 class="function"><a name="gen_voucher_ot-5">gen_voucher_ot/5</a></h3>
<div class="spec">
<p><tt>gen_voucher_ot(Opts::<a href="#type-opt_list">opt_list()</a>, Expires::integer(), Count::integer(), Up::integer(), Down::integer()) -&gt; {ok, <a href="#type-token">token()</a>} | {error, Reply::string()}</tt><br></p>
</div><p>Generate one-time used voucher(s)<br>
  Expires -- Minutes to voucher expires<br>
  Count   -- count vouchers to generate<br>
  Up      -- upload bandwith, kbps<br>
  Down    -- download bandwith, kbps<br>
  Return token: create_time<br></p>

<h3 class="function"><a name="gen_voucher_ot-6">gen_voucher_ot/6</a></h3>
<div class="spec">
<p><tt>gen_voucher_ot(Opts::<a href="#type-opt_list">opt_list()</a>, Expires::integer(), Count::integer(), Up::integer(), Down::integer(), Quota::integer()) -&gt; {ok, <a href="#type-token">token()</a>} | {error, Reply::string()}</tt><br></p>
</div><p>Generate one-time used voucher(s)<br>
  Expires -- Minutes to voucher expires<br>
  Count   -- count vouchers to generate<br>
  Up      -- upload bandwith, kbps<br>
  Down    -- download bandwith, kbps<br>
  Quota   -- download quota, MB<br>
  Return token: create_time<br></p>

<h3 class="function"><a name="get_alerts-1">get_alerts/1</a></h3>
<div class="spec">
<p><tt>get_alerts(Opts::<a href="#type-opt_list">opt_list()</a>) -&gt; {ok, [Alers::list()]} | {error, Reply::string()}</tt><br></p>
</div><p>Return list of all alerts</p>

<h3 class="function"><a name="get_alerts_unarchived-1">get_alerts_unarchived/1</a></h3>
<div class="spec">
<p><tt>get_alerts_unarchived(Opts::<a href="#type-opt_list">opt_list()</a>) -&gt; {ok, [Alers::list()]} | {error, Reply::string()}</tt><br></p>
</div><p>Return list of unarchived alers</p>

<h3 class="function"><a name="get_alluser-3">get_alluser/3</a></h3>
<div class="spec">
<p><tt>get_alluser(Opts::<a href="#type-opt_list">opt_list()</a>, Type::<a href="#type-user_type">user_type()</a>, Hours::integer()) -&gt; {ok, [User::list()]} | {error, Reply::string()}</tt><br></p>
</div><p>Return a list of all known clients, with detailed information about each.</p>

<h3 class="function"><a name="get_alluser_offline-3">get_alluser_offline/3</a></h3>
<div class="spec">
<p><tt>get_alluser_offline(Opts::<a href="#type-opt_list">opt_list()</a>, Type::<a href="#type-user_type">user_type()</a>, Hours::integer()) -&gt; {ok, [User::list()]} | {error, Reply::string()}</tt><br></p>
</div><p>Return a list of all known offline clients, with detailed information about each.</p>

<h3 class="function"><a name="get_aps-1">get_aps/1</a></h3>
<div class="spec">
<p><tt>get_aps(Opts::<a href="#type-opt_list">opt_list()</a>) -&gt; {ok, [Ap::list()]} | {error, Reply::string()}</tt><br></p>
</div><p>Return list of AP's with options</p>

<h3 class="function"><a name="get_events-1">get_events/1</a></h3>
<div class="spec">
<p><tt>get_events(Opts::<a href="#type-opt_list">opt_list()</a>) -&gt; {ok, [Events::list()]} | {error, Reply::string()}</tt><br></p>
</div><p>Return list of all events</p>

<h3 class="function"><a name="get_events-2">get_events/2</a></h3>
<div class="spec">
<p><tt>get_events(Opts::<a href="#type-opt_list">opt_list()</a>, Hours::integer()) -&gt; {ok, [Events::list()]} | {error, Reply::string()}</tt><br></p>
</div><p>Return list of all events within N hours</p>

<h3 class="function"><a name="get_settings-1">get_settings/1</a></h3>
<div class="spec">
<p><tt>get_settings(Opts::<a href="#type-opt_list">opt_list()</a>) -&gt; {ok, [Option::list()]} | {error, Reply::string()}</tt><br></p>
</div><p>Return a list of controller settings.</p>

<h3 class="function"><a name="get_user_groups-1">get_user_groups/1</a></h3>
<div class="spec">
<p><tt>get_user_groups(Opts::<a href="#type-opt_list">opt_list()</a>) -&gt; {ok, [User::list()]} | {error, Reply::string()}</tt><br></p>
</div><p>Return a list of user groups with its settings.</p>

<h3 class="function"><a name="get_users-1">get_users/1</a></h3>
<div class="spec">
<p><tt>get_users(Opts::<a href="#type-opt_list">opt_list()</a>) -&gt; {ok, [User::list()]} | {error, Reply::string()}</tt><br></p>
</div><p>Return a list of all known clients, with significant information about each.</p>

<h3 class="function"><a name="get_users_active-1">get_users_active/1</a></h3>
<div class="spec">
<p><tt>get_users_active(Opts::<a href="#type-opt_list">opt_list()</a>) -&gt; {ok, [User::list()]} | {error, Reply::string()}</tt><br></p>
</div><p>Return a list of all active clients, with significant information about each.</p>

<h3 class="function"><a name="get_voucher-2">get_voucher/2</a></h3>
<div class="spec">
<p><tt>get_voucher(Opts::<a href="#type-opt_list">opt_list()</a>, Token::<a href="#type-token">token()</a>) -&gt; {ok, [tuple()]} | {error, Reply::string()}</tt><br></p>
</div><p>Return generated voucher(s)</p>

<h3 class="function"><a name="get_wlans-1">get_wlans/1</a></h3>
<div class="spec">
<p><tt>get_wlans(Opts::<a href="#type-opt_list">opt_list()</a>) -&gt; {ok, [Wlan::list()]} | {error, Reply::string()}</tt><br></p>
</div><p>Return a list of wireless networks with settings.</p>

<h3 class="function"><a name="login-3">login/3</a></h3>
<div class="spec">
<p><tt>login(Url::string, Login::string(), Pass::string()) -&gt; {ok, <a href="#type-opt_list">opt_list()</a>} | {error, Reply::string()}</tt><br></p>
</div><p>Open session. Return session options or error.
  Use it first before send other request.
  For v2 API only</p>

<h3 class="function"><a name="login-5">login/5</a></h3>
<div class="spec">
<p><tt>login(Url::string, Login::string(), Pass::string(), Version::<a href="#type-version">version()</a>, Site::string()) -&gt; {ok, <a href="#type-opt_list">opt_list()</a>} | {error, Reply::string()}</tt><br></p>
</div><p>Open session. Same as above, but for v3/V4 API.
  For UniFi controller v3/V4: Version and Site required, default site name - "default"</p>

<h3 class="function"><a name="logout-1">logout/1</a></h3>
<div class="spec">
<p><tt>logout(Opts::<a href="#type-opt_list">opt_list()</a>) -&gt; ok | {error, Reply::string()}</tt><br></p>
</div><p>Close session.</p>

<h3 class="function"><a name="restart_ap-2">restart_ap/2</a></h3>
<div class="spec">
<p><tt>restart_ap(Opts::<a href="#type-opt_list">opt_list()</a>, Mac::string()) -&gt; {ok, [null]} | {error, Reply::string()}</tt><br></p>
</div><p>Restart AP with given MAC-address.</p>

<h3 class="function"><a name="unauth_guest-2">unauth_guest/2</a></h3>
<div class="spec">
<p><tt>unauth_guest(Opts::<a href="#type-opt_list">opt_list()</a>, Mac::string()) -&gt; {ok, [null]} | {error, Reply::string()}</tt><br></p>
</div><p>Unauthorize guest based on his MAC address.</p>

<h3 class="function"><a name="unblock_client-2">unblock_client/2</a></h3>
<div class="spec">
<p><tt>unblock_client(Opts::<a href="#type-opt_list">opt_list()</a>, Mac::string()) -&gt; {ok, [null]} | {error, Reply::string()}</tt><br></p>
</div><p>Unblock wireless client with given MAC-address</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Jul 27 2015, 19:10:58.</i></p>
</body>
</html>
